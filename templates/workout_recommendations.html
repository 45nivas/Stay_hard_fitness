{% extends 'base.html' %}
{% block content %}
<div class="workout-page">
  <!-- Hero Section -->
  <div class="hero-section">
    <div class="hero-content">
      <h1>🏋️‍♂️ Welcome, {{ profile.user.first_name|default:profile.user.username }}!</h1>
      <p class="hero-subtitle">Ready to Transform? Your AI-Powered Workout Plan is Ready!</p>
    </div>
  </div>

  <!-- Personal Info Section -->
  <div class="info-section">
    <div class="section-header">
      <h2>🧍 Your Personal Info</h2>
    </div>
    <div class="info-grid">
      <div class="info-card">
        <div class="info-label">Age</div>
        <div class="info-value">{{ profile.age }} years</div>
      </div>
      <div class="info-card">
        <div class="info-label">Gender</div>
        <div class="info-value">{{ profile.get_gender_display }}</div>
      </div>
      <div class="info-card">
        <div class="info-label">Height</div>
        <div class="info-value">{{ profile.height }} cm</div>
      </div>
      <div class="info-card">
        <div class="info-label">Weight</div>
        <div class="info-value">{{ profile.weight }} kg</div>
      </div>
    </div>
  </div>

  <!-- Fitness Goals Section -->
  <div class="goals-section">
    <div class="section-header">
      <h2>🎯 Fitness Goals</h2>
    </div>
    <div class="goals-grid">
      <div class="goal-card">
        <div class="goal-icon">🎯</div>
        <div class="goal-label">Primary Goal</div>
        <div class="goal-value">{{ profile.get_primary_goal_display }}</div>
      </div>
      <div class="goal-card">
        <div class="goal-icon">⭐</div>
        <div class="goal-label">Fitness Level</div>
        <div class="goal-value">{{ profile.get_fitness_level_display }}</div>
      </div>
      <div class="goal-card">
        <div class="goal-icon">⏰</div>
        <div class="goal-label">Workout Time</div>
        <div class="goal-value">{{ profile.available_time }} mins/day</div>
      </div>
      <div class="goal-card">
        <div class="goal-icon">🍎</div>
        <div class="goal-label">Daily Calories</div>
        <div class="goal-value">{{ profile.calories_per_day|default:user_stats.tdee }} kcal</div>
      </div>
    </div>
  </div>

  <!-- Stats Section -->
  <div class="stats-section">
    <div class="section-header">
      <h2>📊 Your Health Stats</h2>
    </div>
    <div class="stats-grid">
      <div class="stat-card highlight">
        <div class="stat-icon">📏</div>
        <div class="stat-label">BMI</div>
        <div class="stat-value">{{ user_stats.bmi }}</div>
        <div class="stat-category">{{ user_stats.bmi_category }}</div>
      </div>
      <div class="stat-card">
        <div class="stat-icon">🔥</div>
        <div class="stat-label">TDEE</div>
        <div class="stat-value">{{ user_stats.tdee }}</div>
        <div class="stat-unit">kcal/day</div>
      </div>
      <div class="stat-card">
        <div class="stat-icon">🎯</div>
        <div class="stat-label">Target Calories</div>
        <div class="stat-value">{{ nutrition.daily_calories|default:user_stats.recommended_calories|default:user_stats.tdee }}</div>
        <div class="stat-unit">kcal/day</div>
      </div>
    </div>
  </div>

  <!-- AI Workout Plan Section -->
  <div class="workout-section">
    <div class="section-header">
      <h2>🤖 Your AI-Powered Workout Plan</h2>
      <p class="section-subtitle">Personalized just for you based on your goals and fitness level</p>
    </div>
    
    <div class="workout-plan">
      {% for day, workout in weekly_plan.items %}
        <div class="day-card {% if workout.type == 'rest' %}rest-day{% elif workout.type == 'cardio' %}cardio-day{% else %}training-day{% endif %}">
          <div class="day-header">
            <div class="day-title">
              {% if workout.type == 'rest' %}
                🛌 {{ day }} – Rest Day
              {% elif workout.type == 'cardio' %}
                🏃‍♂️ {{ day }} – {{ workout.workout_name }}
              {% else %}
                💪 {{ day }} – {{ workout.workout_name }}
              {% endif %}
            </div>
            {% if workout.duration %}
              <div class="day-duration">⏱️ {{ workout.duration }}</div>
            {% endif %}
          </div>
          
          {% if workout.type == 'rest' %}
            <div class="rest-content">
              <div class="rest-activity">
                <span class="activity-icon">🧘</span>
                <span>{{ workout.activity|default:"Light stretching or gentle walk recommended" }}</span>
              </div>
              <div class="motivational-tip">
                <span class="tip-icon">💡</span>
                <span>Recovery is when your muscles grow stronger!</span>
              </div>
            </div>
          {% elif workout.type == 'cardio' %}
            <div class="cardio-content">
              <div class="cardio-activity">
                <span class="activity-icon">🏃‍♂️</span>
                <span>{{ workout.activity|default:"20-30 minutes of moderate cardio" }}</span>
              </div>
              <div class="motivational-tip">
                <span class="tip-icon">🔥</span>
                <span>Cardio boosts endurance and burns calories!</span>
              </div>
            </div>
          {% elif workout.exercises %}
            <div class="exercises-content">
              {% for exercise in workout.exercises|slice:":4" %}
                <div class="exercise-item">
                  <div class="exercise-name">{{ exercise.name }}</div>
                  <div class="exercise-details">
                    <span class="sets-reps">{{ exercise.sets }} sets × {{ exercise.reps }} reps</span>
                    <span class="rest-time">Rest: {{ exercise.rest }}</span>
                  </div>
                  {% if exercise.targets %}
                    <div class="exercise-targets">
                      <span class="targets-label">Targets:</span>
                      <span class="targets-list">{{ exercise.targets|join:", " }}</span>
                    </div>
                  {% endif %}
                </div>
              {% endfor %}
              
              {% if workout.exercises|length > 4 %}
                <div class="more-exercises">
                  <span>+ {{ workout.exercises|length|add:"-4" }} more exercises</span>
                </div>
              {% endif %}
              
              <div class="motivational-tip">
                <span class="tip-icon">🔥</span>
                <span>{{ tips.form|default:"Focus on proper form over heavy weights!" }}</span>
              </div>
            </div>
          {% else %}
            <div class="workout-content">
              <p>{{ workout.description|default:"Complete workout details will be provided." }}</p>
              <div class="motivational-tip">
                <span class="tip-icon">💪</span>
                <span>Stay consistent and results will follow!</span>
              </div>
            </div>
          {% endif %}
        </div>
      {% endfor %}
    </div>
  </div>

  <!-- Action Buttons -->
  <div class="action-section">
    <a href="{% url 'workout_selection' %}" class="start-button">
      <span class="button-icon">💥</span>
      <span class="button-text">Start My Workouts</span>
      <span class="button-arrow">→</span>
    </a>
    
    <div class="secondary-actions">
      <a href="{% url 'profile_setup' %}" class="secondary-button">
        ✏️ Update Profile
      </a>
    </div>
  </div>
</div>

<style>
* {
  box-sizing: border-box;
}

.workout-page {
  max-width: 1200px;
  margin: 0 auto;
  padding: 1rem;
  font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
  background: linear-gradient(135deg, #fff 0%, #f8f9fa 100%);
  min-height: 100vh;
}

/* Hero Section */
.hero-section {
  text-align: center;
  padding: 2rem 0;
  margin-bottom: 2rem;
  background: linear-gradient(135deg, #dc3545 0%, #c82333 100%);
  border-radius: 20px;
  color: white;
  box-shadow: 0 10px 30px rgba(220, 53, 69, 0.3);
}

.hero-content h1 {
  font-size: 2.5rem;
  margin: 0 0 0.5rem 0;
  font-weight: 700;
}

.hero-subtitle {
  font-size: 1.2rem;
  margin: 0;
  opacity: 0.9;
}

/* Section Headers */
.section-header {
  text-align: center;
  margin-bottom: 1.5rem;
}

.section-header h2 {
  font-size: 1.8rem;
  color: #dc3545;
  margin: 0 0 0.5rem 0;
  font-weight: 600;
}

.section-subtitle {
  color: #6c757d;
  font-size: 1rem;
  margin: 0;
}

/* Info Section */
.info-section {
  margin-bottom: 2rem;
}

.info-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 1rem;
}

.info-card {
  background: white;
  padding: 1.5rem;
  border-radius: 15px;
  text-align: center;
  border: 2px solid #f8f9fa;
  transition: all 0.3s ease;
}

.info-card:hover {
  border-color: #dc3545;
  transform: translateY(-2px);
  box-shadow: 0 8px 25px rgba(220, 53, 69, 0.15);
}

.info-label {
  color: #6c757d;
  font-size: 0.9rem;
  margin-bottom: 0.5rem;
  font-weight: 500;
}

.info-value {
  color: #dc3545;
  font-size: 1.3rem;
  font-weight: 700;
}

/* Goals Section */
.goals-section {
  margin-bottom: 2rem;
}

.goals-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 1rem;
}

.goal-card {
  background: white;
  padding: 1.5rem;
  border-radius: 15px;
  text-align: center;
  border: 2px solid #f8f9fa;
  transition: all 0.3s ease;
}

.goal-card:hover {
  border-color: #dc3545;
  transform: translateY(-2px);
  box-shadow: 0 8px 25px rgba(220, 53, 69, 0.15);
}

.goal-icon {
  font-size: 2rem;
  margin-bottom: 0.5rem;
}

.goal-label {
  color: #6c757d;
  font-size: 0.9rem;
  margin-bottom: 0.5rem;
  font-weight: 500;
}

.goal-value {
  color: #dc3545;
  font-size: 1.1rem;
  font-weight: 700;
}

/* Stats Section */
.stats-section {
  margin-bottom: 2rem;
}

.stats-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 1rem;
}

.stat-card {
  background: white;
  padding: 1.5rem;
  border-radius: 15px;
  text-align: center;
  border: 2px solid #f8f9fa;
  transition: all 0.3s ease;
}

.stat-card.highlight {
  background: linear-gradient(135deg, #dc3545 0%, #c82333 100%);
  color: white;
  border-color: #dc3545;
}

.stat-card:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 25px rgba(220, 53, 69, 0.15);
}

.stat-icon {
  font-size: 2rem;
  margin-bottom: 0.5rem;
}

.stat-label {
  font-size: 0.9rem;
  margin-bottom: 0.5rem;
  font-weight: 500;
  opacity: 0.8;
}

.stat-value {
  font-size: 1.8rem;
  font-weight: 700;
  margin-bottom: 0.25rem;
}

.stat-category, .stat-unit {
  font-size: 0.9rem;
  opacity: 0.8;
}

/* Workout Section */
.workout-section {
  margin-bottom: 2rem;
}

.workout-plan {
  display: grid;
  gap: 1.5rem;
}

.day-card {
  background: white;
  border-radius: 20px;
  padding: 1.5rem;
  border: 2px solid #f8f9fa;
  transition: all 0.3s ease;
}

.day-card:hover {
  transform: translateY(-2px);
  box-shadow: 0 12px 30px rgba(0,0,0,0.1);
}

.training-day {
  border-left: 5px solid #dc3545;
}

.rest-day {
  border-left: 5px solid #28a745;
  background: linear-gradient(135deg, #f8fff8 0%, #e8f5e8 100%);
}

.cardio-day {
  border-left: 5px solid #007bff;
  background: linear-gradient(135deg, #f8fbff 0%, #e8f2ff 100%);
}

.day-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 1rem;
  padding-bottom: 1rem;
  border-bottom: 2px solid #f8f9fa;
}

.day-title {
  font-size: 1.3rem;
  font-weight: 700;
  color: #dc3545;
}

.day-duration {
  color: #6c757d;
  font-size: 0.9rem;
  background: #f8f9fa;
  padding: 0.25rem 0.75rem;
  border-radius: 20px;
}

.exercises-content {
  display: grid;
  gap: 1rem;
}

.exercise-item {
  background: #f8f9fa;
  padding: 1rem;
  border-radius: 10px;
  border-left: 3px solid #dc3545;
}

.exercise-name {
  font-weight: 600;
  color: #dc3545;
  margin-bottom: 0.5rem;
  font-size: 1.1rem;
}

.exercise-details {
  display: flex;
  gap: 1rem;
  margin-bottom: 0.5rem;
}

.sets-reps {
  background: #dc3545;
  color: white;
  padding: 0.25rem 0.75rem;
  border-radius: 15px;
  font-size: 0.9rem;
  font-weight: 600;
}

.rest-time {
  background: #6c757d;
  color: white;
  padding: 0.25rem 0.75rem;
  border-radius: 15px;
  font-size: 0.9rem;
}

.exercise-targets {
  font-size: 0.9rem;
  color: #6c757d;
}

.targets-label {
  font-weight: 600;
}

.targets-list {
  text-transform: capitalize;
}

.rest-content, .cardio-content, .workout-content {
  display: grid;
  gap: 1rem;
}

.rest-activity, .cardio-activity {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  padding: 1rem;
  background: #f8f9fa;
  border-radius: 10px;
}

.activity-icon {
  font-size: 1.5rem;
}

.motivational-tip {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  padding: 1rem;
  background: linear-gradient(135deg, #fff3cd 0%, #ffeaa7 100%);
  border-radius: 10px;
  border-left: 3px solid #ffc107;
  font-style: italic;
  color: #856404;
}

.tip-icon {
  font-size: 1.2rem;
}

.more-exercises {
  text-align: center;
  color: #6c757d;
  font-style: italic;
  padding: 0.5rem;
}

/* Action Section */
.action-section {
  text-align: center;
  margin-top: 3rem;
}

.start-button {
  display: inline-flex;
  align-items: center;
  gap: 1rem;
  background: linear-gradient(135deg, #dc3545 0%, #c82333 100%);
  color: white;
  padding: 1.25rem 2.5rem;
  border-radius: 50px;
  text-decoration: none;
  font-size: 1.2rem;
  font-weight: 700;
  box-shadow: 0 10px 30px rgba(220, 53, 69, 0.4);
  transition: all 0.3s ease;
  margin-bottom: 1rem;
}

.start-button:hover {
  transform: translateY(-3px);
  box-shadow: 0 15px 40px rgba(220, 53, 69, 0.5);
  color: white;
  text-decoration: none;
}

.button-icon, .button-arrow {
  font-size: 1.3rem;
}

.secondary-actions {
  margin-top: 1rem;
}

.secondary-button {
  color: #6c757d;
  text-decoration: none;
  padding: 0.75rem 1.5rem;
  border: 2px solid #e9ecef;
  border-radius: 25px;
  transition: all 0.3s ease;
  display: inline-block;
}

.secondary-button:hover {
  color: #dc3545;
  border-color: #dc3545;
  text-decoration: none;
}

/* Mobile Responsive */
@media (max-width: 768px) {
  .workout-page {
    padding: 0.5rem;
  }
  
  .hero-content h1 {
    font-size: 2rem;
  }
  
  .hero-subtitle {
    font-size: 1rem;
  }
  
  .info-grid, .goals-grid, .stats-grid {
    grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
  }
  
  .day-header {
    flex-direction: column;
    align-items: flex-start;
    gap: 0.5rem;
  }
  
  .exercise-details {
    flex-direction: column;
    gap: 0.5rem;
  }
  
  .start-button {
    padding: 1rem 2rem;
    font-size: 1.1rem;
  }
}
</style>
{% endblock %}
